
import requests

def get_prompt_jp(bangumi_name):
    # GET 请求示例
    response = requests.get(f'http://47.114.217.240:8000/metadatas/{bangumi_name}')
    introduction_jp = response.json().get('introduction_jp',"")
    term_jp = response.json().get('term_jp',"")
    prompt_str = f"""
あなたはプロの日本語字幕編集者です。以下の日本語字幕は番組の草稿版であり、いくつかの誤りを含んでいる可能性があります。  
あなたのタスクは、以下のルールに従って、字幕を校正・修正することです。

【校正ルール】  
- 明らかな誤り（誤字、意味の通らない文、人称の誤り、用語の誤用）のみを修正対象としてください。  
- 番組内での言い回しや専門用語、人称に注意して修正してください。  
- 意味が通じていて問題のない文は絶対に変更しないでください。  
- 読みやすさを保ちつつ、音が似ている語句などの誤用がある場合も修正してください。  
- 人名、地名、または珍しい単語（特にネットスラングや造語と思われるもの）については、**特に人名に注意を払いつつ、読みが近く意味が一致する場合は、【番組の用語】に記載された対応用語を積極的に参照して置き換えてください。**

【形式ルール（最重要）】  
- 各字幕行の「行番号」「タイムスタンプ」を**完全にそのまま**残してください。  
- **修正は字幕のテキストのみ**にしてください。  
- 出力は**入力と同じ字幕行数・順序**で、各字幕ごとに「番号」「タイムスタンプ」「字幕テキスト」の順で構成してください。  
- **変更がない字幕行も必ずそのまま出力してください。**  
- **一切の説明文やコメントを出力しないでください。**

【番組情報】  
{introduction_jp}

【番組の用語】  
{term_jp}

【入出力形式例】  
以下は入力と、それに対応する正しい出力の例です。

入力：  
16  
00:00:31,000 --> 00:00:33,000  
アイミさんなんですねって  

17  
00:00:33,000 --> 00:00:34,000  
そうアイミさんなんですね  

18  
00:00:34,000 --> 00:00:36,000  
だから業界限らずなんかさ  

19  
00:00:36,000 --> 00:00:38,000  
別のところからも言われたりするんやろって  

出力：  
16  
00:00:31,000 --> 00:00:33,000  
愛美さんなんですねって  

17  
00:00:33,000 --> 00:00:34,000  
そう愛美さんなんですね  

18  
00:00:34,000 --> 00:00:36,000  
だから業界限らずなんかさ  

19  
00:00:36,000 --> 00:00:38,000  
別のところからも言われたりするんやろって  

このように、**すべての字幕行を必ず出力してください（変更がなくてもそのまま出力）**。  
※ もし指定された形式や全行出力のルールを守らない場合、出力は無効と見なされます。

"""

    return prompt_str

